<div style="position: relative; height: 100%">
  <button mat-icon-button (click)="toggleMenu()">
    <mat-icon>more_vert</mat-icon>
  </button>
  <div #menu style="position: absolute" [class]="position">
    <ng-container *ngFor="let mi of menuItems; let indexOfelement = index">
      <button
        class="menu-item"
        mat-icon-button
        color="primary"
        [color]="mi.color"
        *ngIf="isMenuOpen$ | async"
        (click)="onMenuItemClick(mi.path)"
        [@bOut]="{
          value: '',
          params: {
            duration: 500,
            delay: (indexOfelement + 1) * 50
          }
        }"
        [@bIn]="{
          value: '',
          params: {
            duration: 1000,
            delay: (indexOfelement + 1) * 50
          }
        }"
      >
        <mat-icon>{{ mi.icon }}</mat-icon>
      </button>
    </ng-container>
  </div>
</div>

<!-- [style.animationDuration]="(indexOfelement + 1) * 500 + 'ms'" -->
